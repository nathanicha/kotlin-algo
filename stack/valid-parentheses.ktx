/**
 * Solves Valid Parentheses Problem
 *
 * Given a string s containing only '(', ')', '{', '}', '[' and ']',
 * determine if the input string is valid.
 * A string is valid if brackets are closed by the same type
 * and in the correct order.
 */
fun main() {
    println("result: "+isValidParentheses("()"))
    println()
    println("result: "+isValidParentheses("()[]{}"))
    println()
    println("result: "+isValidParentheses("(]"))
    println()
    println("result: "+isValidParentheses("([)]"))
    println()
    println("result: "+isValidParentheses("{[]}"))
}

fun isValidParentheses(s: String): Boolean {
    println("Input: $s")
    val stack = mutableListOf<Char>()
    val map: Map<Char, Char> = mapOf(
        ')' to '(',
        '}' to '{',
        ']' to '['
    )
    
    s.forEachIndexed { index, it ->
        println("==> index: $index value: $it")
        if(it == '(' || it == '{' || it == '[') {
            stack.add(it) //push stack
            println("==>   push: $it")
        } else {
            if(stack.isEmpty()) return false
            
            val top = stack.last()
            stack.removeLast() //pop stack
            println("==>   condition: ${top} == ${map[it]}")
            if(top != map[it]) {
                return false
            }
        }
    }
    
    return stack.isEmpty()
}
